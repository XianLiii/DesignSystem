<template>
  <div class="p-8">
    <h1 class="text-3xl font-bold mb-8">Input ç»„ä»¶</h1>
    
    <!-- Input Tokenç»Ÿè®¡ -->
    <TokenStats 
      title="Input Tokenç»Ÿè®¡"
      :custom-stats="inputTokenStats"
      :stats-to-show="['componentCount', 'variantCount', 'componentTokenCount', 'semanticTokenCount', 'baseTokenCount']"
    />
    
    <!-- å¯äº¤äº’çš„ç»„ä»¶ç¤ºä¾‹ -->
    <section class="mb-12">
      <h2 class="text-xl font-bold mb-6">å¯äº¤äº’ç»„ä»¶ç¤ºä¾‹</h2>
      <div class="space-y-6">
        <!-- Default Input -->
        <div>
          <h3 class="text-lg font-semibold mb-4">Default Input</h3>
          <div class="flex space-x-4 items-center">
            <input 
              v-model="defaultValue"
              type="text"
              placeholder="è¯·è¾“å…¥å†…å®¹..."
              class="border border-gray-300 rounded px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"
              :class="{ 'opacity-50 cursor-not-allowed': inputDisabled }"
              :disabled="inputDisabled"
            />
            <button 
              @click="inputDisabled = !inputDisabled"
              class="bg-blue-500 text-white px-3 py-1 rounded text-xs hover:bg-blue-600"
            >
              {{ inputDisabled ? 'å¯ç”¨' : 'ç¦ç”¨' }}
            </button>
          </div>
        </div>

        <!-- Error Input -->
        <div>
          <h3 class="text-lg font-semibold mb-4">Error Input</h3>
          <div class="flex space-x-4 items-center">
            <input 
              v-model="errorValue"
              type="text"
              placeholder="é”™è¯¯çŠ¶æ€è¾“å…¥æ¡†"
              class="border border-red-300 rounded px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-transparent bg-red-50"
            />
            <span class="text-sm text-red-600">è¯·è¾“å…¥æœ‰æ•ˆå†…å®¹</span>
          </div>
        </div>

        <!-- Success Input -->
        <div>
          <h3 class="text-lg font-semibold mb-4">Success Input</h3>
          <div class="flex space-x-4 items-center">
            <input 
              v-model="successValue"
              type="text"
              placeholder="æˆåŠŸçŠ¶æ€è¾“å…¥æ¡†"
              class="border border-green-300 rounded px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent bg-green-50"
            />
            <span class="text-sm text-green-600">âœ“ è¾“å…¥æœ‰æ•ˆ</span>
          </div>
        </div>
      </div>
    </section>

    <!-- é™æ€æ ·å¼å±•ç¤º -->
    <section class="mb-12">
      <h2 class="text-xl font-bold mb-6">äº¤äº’çŠ¶æ€æ ·å¼å±•ç¤º</h2>
      <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
        <!-- Input çŠ¶æ€ -->
        <div>
          <h3 class="text-lg font-semibold mb-4">Input çŠ¶æ€</h3>
          <div class="space-y-4">
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-1">Default</label>
              <input 
                type="text"
                placeholder="é»˜è®¤çŠ¶æ€"
                class="w-full border border-gray-300 rounded px-3 py-2 text-sm"
                readonly
              />
            </div>
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-1">Focus</label>
              <input 
                type="text"
                placeholder="èšç„¦çŠ¶æ€"
                class="w-full border border-blue-500 rounded px-3 py-2 text-sm ring-2 ring-blue-500 ring-opacity-50"
                readonly
              />
            </div>
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-1">Error</label>
              <input 
                type="text"
                placeholder="é”™è¯¯çŠ¶æ€"
                class="w-full border border-red-300 rounded px-3 py-2 text-sm bg-red-50"
                readonly
              />
            </div>
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-1">Disabled</label>
              <input 
                type="text"
                placeholder="ç¦ç”¨çŠ¶æ€"
                class="w-full border border-gray-300 rounded px-3 py-2 text-sm opacity-50 cursor-not-allowed"
                disabled
              />
            </div>
          </div>
        </div>

        <!-- Input å˜ä½“ -->
        <div>
          <h3 class="text-lg font-semibold mb-4">Input å˜ä½“</h3>
          <div class="space-y-4">
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-1">Small</label>
              <input 
                type="text"
                placeholder="å°å°ºå¯¸è¾“å…¥æ¡†"
                class="w-full border border-gray-300 rounded px-2 py-1 text-xs"
                readonly
              />
            </div>
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-1">Large</label>
              <input 
                type="text"
                placeholder="å¤§å°ºå¯¸è¾“å…¥æ¡†"
                class="w-full border border-gray-300 rounded px-4 py-3 text-base"
                readonly
              />
            </div>
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-1">With Icon</label>
              <div class="relative">
                <input 
                  type="text"
                  placeholder="å¸¦å›¾æ ‡çš„è¾“å…¥æ¡†"
                  class="w-full border border-gray-300 rounded px-3 py-2 text-sm pl-10"
                  readonly
                />
                <div class="absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400">
                  ğŸ”
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Input Tokené…ç½®è¡¨æ ¼ -->
    <section class="mb-12">
      <h2 class="text-xl font-bold mb-6">Input Tokené…ç½®</h2>
      <TokenTable :tokens="inputTokens" />
    </section>
  </div>
</template>

<script setup>
import { ref, onMounted, computed } from 'vue'
import { getComponentTokens, semanticTokens, componentTokens, baseTokens } from '../stores/tokenStore'
import TokenTable from './TokenTable.vue'
import TokenStats from './TokenStats.vue'

const defaultValue = ref('')
const errorValue = ref('')
const successValue = ref('')
const inputDisabled = ref(false)
const inputTokens = ref([])

// Input Tokenç»Ÿè®¡
const inputTokenStats = computed(() => {
  // è·å–Inputç»„ä»¶çš„æ‰€æœ‰Tokenæ•°æ®
  const inputTokenData = getComponentTokens('input')
  
  // ä½¿ç”¨ä¸å…¨å±€ç»Ÿè®¡ç›¸åŒçš„é€»è¾‘
  const uniqueBaseTokenNames = new Set()
  const uniqueSemanticTokenNames = new Set()
  const uniqueComponentTokenNames = new Set()
  const variants = new Set()
  
  inputTokenData.forEach(token => {
    // åŸºç¡€Tokenåç§°ï¼šåªè¦åç§°ä¸ä¸€æ ·å°±ç®—ä¸€ä¸ª
    if (token.baseToken) {
      uniqueBaseTokenNames.add(token.baseToken)
    }
    
    // è¯­ä¹‰Tokenåç§°ï¼šåªè¦åç§°ä¸ä¸€æ ·å°±ç®—ä¸€ä¸ª
    if (token.semanticToken) {
      uniqueSemanticTokenNames.add(token.semanticToken)
    }
    
    // ç»„ä»¶Tokenåç§°ï¼šå®Œæ•´çš„ç»„ä»¶Tokenåç§°ï¼ˆåŒ…å«æ ·å¼å±æ€§ï¼‰
    if (token.componentToken) {
      uniqueComponentTokenNames.add(token.componentToken)
    }
    
    // å˜ä½“ï¼šä»tokençš„variantå­—æ®µè·å–
    if (token.variant) {
      variants.add(token.variant)
    }
  })

  return {
    componentCount: 1, // Inputç»„ä»¶é¡µé¢åªæœ‰ä¸€ä¸ªç»„ä»¶
    baseTokenCount: uniqueBaseTokenNames.size,
    semanticTokenCount: uniqueSemanticTokenNames.size,
    componentTokenCount: uniqueComponentTokenNames.size,
    variantCount: variants.size
  }
})

onMounted(() => {
  inputTokens.value = getComponentTokens('input')
})
</script> 